services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: vue-app
    ports:
      - "80:80"
      - 443:443
    volumes:
      - ./certbot/www/:/var/www/certbot/:ro
      - ./certbot/conf/:/etc/letsencrypt/:rw
    #   - ./etc/:/etc/letsencrypt/ ATTIVARE PER LA GENERAZIONE DEI CERTIFICATI
    
  backend:
      build:
        context: .
        dockerfile: Dockerfile
        target: backend-stage
      container_name: backend
      ports:
        - "3000:3000"
      volumes:
        - ./server/teams.json:/hackathon25/teams.json
        - ./server/students.json:/hackathon25/students.json

  certbot:
    image: certbot/certbot:latest
    volumes:
      - ./certbot/www/:/var/www/certbot/:rw
      - ./certbot/conf/:/etc/letsencrypt/:rw